{"version":3,"file":"static/webpack/static/development/pages/index.js.86bf1d78ee86432b6dd9.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport io from 'socket.io-client'\n\nconst socket = io('https://xkeith.tech:3000')\n\nconst Index = () => {\n  const [data, setData] = useState([])\n  const [message, setMessage] = useState('')\n  const list = data.map((val, index) => <li key={index}>{val}</li>)\n\n  const handleMessage = e => {\n    e.preventDefault()\n    setMessage(e.target.value)\n  }\n  const handleSend = () => {\n    if (message !== '') {\n      socket.emit('chat message', message)\n      setMessage('')\n    }\n  }\n  const handleKeyDown = e => {\n    if (e.which === 13) {\n      handleSend()\n    }\n  }\n\n  useEffect(() => {\n    socket.on('chat message', msg => {\n      console.log(data)\n      setData([...data, msg])\n    })\n    // must remove the socket when unmounted\n    return () => {\n      socket.off('chat message')\n    }\n  })\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"main\">\n          <div className=\"chat\">\n            <ul className=\"message\">{list}</ul>\n          </div>\n          <div className=\"input\">\n            <input\n              value={message}\n              onChange={handleMessage}\n              onKeyDown={handleKeyDown}\n            />\n            <button onClick={handleSend}>SEND</button>\n          </div>\n        </div>\n      </div>\n\n      <style jsx>{`\n        body {\n          margin: 0px;\n        }\n        .container {\n          display: flex;\n          box-sizing: border-box;\n        }\n        .main {\n          box-sizing: border-box;\n          margin: auto;\n          border: 1px black solid;\n          border-radius: 10px;\n          height: 90vh;\n          width: 70%;\n        }\n        .chat {\n          width: 100%;\n          height: 93%;\n          border-radius: 10px 10px 0 0;\n          background-color: pink;\n          overflow: auto;\n        }\n        .input {\n          width: 100%;\n          height: 7%;\n          border-radius: 0 0 10px 10px;\n          border: 1px burlywood solid;\n        }\n        input {\n          width: 70%;\n          height: 80%;\n        }\n        button {\n          width: 25%;\n          height: 80%;\n          margin-left: 10px;\n        }\n      `}</style>\n      <style jsx global>{`\n        .message {\n          list-style-type: none;\n          margin: 0;\n          padding: 10px;\n        }\n        .message li:nth-child(odd) {\n          background: beige;\n        }\n      `}</style>\n    </>\n  )\n}\n\nexport default Index\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoEA;AACA;AACA;;;;A","sourceRoot":""}